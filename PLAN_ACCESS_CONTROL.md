# ğŸ“Š Plan BazlÄ± EriÅŸim KontrolÃ¼

## ğŸ¯ PLAN Ã–ZETÄ°

| Ã–zellik | FREE | PRO | PREMIUM |
|---------|------|-----|---------|
| **Fiyat** | $0 | $25/ay | $299/ay |
| **Borsa BaÄŸlantÄ±sÄ±** | âŒ Yok | âœ… 5 Borsa | âœ… SÄ±nÄ±rsÄ±z |
| **AÃ§Ä±k Pozisyon** | 1 Demo | âœ… 10 GerÃ§ek | âœ… 50 GerÃ§ek |
| **Spot Trading** | âŒ | âœ… | âœ… |
| **Futures/Leverage** | âŒ | âœ… 1x-125x | âœ… 1x-125x |
| **Auto-Trading** | âŒ | âœ… | âœ… |
| **TP/SL YÃ¶netimi** | âŒ | âœ… | âœ… |
| **Custom Stratejiler** | âŒ | âŒ | âœ… |
| **API Access** | âŒ | âŒ | âœ… |
| **Support** | Community | Priority | Dedicated |

---

## ğŸ†“ FREE KULLANICI ($0) - Demo Mod

### âœ… ERÄ°ÅEBÄ°LÄ°R:

#### Sayfalar
- âœ… Ana sayfa (/)
- âœ… Auth sayfasÄ± (/auth)
- âœ… Dashboard (/dashboard) - Read-only mod
- âœ… Pricing (/pricing)
- âœ… FAQ (/faq)
- âœ… Privacy (/privacy)
- âœ… Terms (/terms)

#### Dashboard Ã–zellikleri
- âœ… Borsa fiyatlarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leme
- âœ… EMA sinyallerini gÃ¶rme
- âœ… Demo pozisyon aÃ§ma (1 adet)
- âœ… Grafikleri gÃ¶rÃ¼ntÃ¼leme
- âœ… Ä°statistikleri gÃ¶rme

#### Settings SayfasÄ±
- âœ… Profil bilgilerini gÃ¶rÃ¼ntÃ¼leme
- âœ… Dil deÄŸiÅŸtirme
- âœ… Para birimi deÄŸiÅŸtirme
- âš ï¸ API key ekleme alanÄ± gÃ¶rÃ¼nÃ¼r AMA:
  - "Pro'ya yÃ¼kselt" mesajÄ± gÃ¶sterilir
  - API key kaydetme devre dÄ±ÅŸÄ±

### âŒ ERÄ°ÅEMEZ:

#### Ã–zellikler
- âŒ GerÃ§ek borsa API key ekleme
- âŒ GerÃ§ek pozisyon aÃ§ma
- âŒ Spot trading
- âŒ Futures/Leverage trading
- âŒ Auto-trading bot
- âŒ TP/SL otomatik yÃ¶netimi
- âŒ Ã‡oklu pozisyon (sadece 1 demo)
- âŒ Trading sayfasÄ± (/trading) - "Upgrade to Pro" mesajÄ±

#### Mesajlar
- "ğŸ”’ Bu Ã¶zellik Pro planÄ±nda mevcut"
- "ğŸ“ˆ GerÃ§ek trading iÃ§in Pro'ya yÃ¼kseltin"
- "ğŸ’ 1 pozisyon limitine ulaÅŸtÄ±nÄ±z - Pro: 10 pozisyon"

---

## ğŸ’¼ PRO KULLANICI ($25/ay)

### âœ… ERÄ°ÅEBÄ°LÄ°R:

#### TÃ¼m FREE Ã–zellikleri +

#### Sayfalar
- âœ… Trading sayfasÄ± (/trading) - Tam eriÅŸim

#### Trading Ã–zellikleri
- âœ… 5 farklÄ± borsa API key ekleme
  - Binance
  - Bybit
  - OKX
  - KuCoin
  - MEXC
- âœ… Spot trading (Her borsada)
- âœ… Futures trading (Her borsada)
- âœ… Leverage kullanma (1x-125x)
- âœ… 10 aÃ§Ä±k pozisyon
- âœ… Auto-trading bot
- âœ… EMA 9/21 stratejisi
- âœ… TP/SL otomatik yÃ¶netimi

#### Settings SayfasÄ±
- âœ… API key ekleme/silme
- âœ… Auto-trading ayarlarÄ±
- âœ… Trading parametreleri ayarlama

#### Dashboard
- âœ… GerÃ§ek bakiye gÃ¶sterimi
- âœ… TÃ¼m aÃ§Ä±k pozisyonlar
- âœ… GerÃ§ek PnL hesaplama
- âœ… Transaction history

### âŒ ERÄ°ÅEMEZ:

- âŒ Custom stratejiler
- âŒ API access (REST API)
- âŒ Arbitrage modÃ¼lÃ¼
- âŒ 10'dan fazla pozisyon
- âŒ 5'ten fazla borsa

#### Mesajlar
- "ğŸ’ Premium'da 50 pozisyon aÃ§abilirsiniz"
- "ğŸš€ Custom stratejiler iÃ§in Premium'a geÃ§in"

---

## ğŸ‘‘ PREMIUM KULLANICI ($299/ay)

### âœ… ERÄ°ÅEBÄ°LÄ°R:

#### TÃ¼m PRO Ã–zellikleri +

#### Advanced Trading
- âœ… SÄ±nÄ±rsÄ±z borsa baÄŸlantÄ±sÄ±
- âœ… 50 aÃ§Ä±k pozisyon
- âœ… Custom trading stratejileri
- âœ… Arbitrage modÃ¼lÃ¼
- âœ… WebSocket fiyat updates
- âœ… Advanced backtesting

#### API Access
- âœ… REST API endpoints
- âœ… Webhook entegrasyonlarÄ±
- âœ… Custom bot development
- âœ… API documentation

#### Premium Features
- âœ… Dedicated support (24/7)
- âœ… Priority order execution
- âœ… Advanced analytics
- âœ… Custom indicators
- âœ… Training & consulting
- âœ… 99.9% SLA garantisi

#### Ã–zel Ã–zellik Talepleri
- âœ… Yeni borsa entegrasyonu
- âœ… Custom stratejiler
- âœ… Ã–zel raporlar

---

## ğŸ”’ BACKEND ERÄ°ÅÄ°M KONTROLÃœ

### Endpoint BazlÄ± Kontrol

```python
# backend/auth.py

def check_feature_access(user_plan: str, feature: str) -> bool:
    """
    Check if user can access a feature based on their plan
    """
    access_matrix = {
        "api_keys": ["pro", "premium"],
        "spot_trading": ["pro", "premium"],
        "futures_trading": ["pro", "premium"],
        "auto_trading": ["pro", "premium"],
        "custom_strategies": ["premium"],
        "api_access": ["premium"],
        "arbitrage": ["premium"],
    }
    
    return user_plan in access_matrix.get(feature, [])

# KullanÄ±m:
@app.post("/api/user/api-keys")
async def add_api_key(current_user = Depends(get_current_user)):
    user_plan = await get_user_plan(current_user["user_id"])
    
    if not check_feature_access(user_plan, "api_keys"):
        raise HTTPException(
            status_code=403,
            detail="Bu Ã¶zellik Pro planÄ±nda mevcut. LÃ¼tfen planÄ±nÄ±zÄ± yÃ¼kseltin."
        )
    # ... devam et
```

### Pozisyon Limiti KontrolÃ¼

```python
# backend/main.py - create_position endpoint

user_plan = await get_user_plan(user_id)
current_positions = len(await get_open_positions(user_id))

plan_limits = {
    "free": 1,
    "pro": 10,
    "premium": 50
}

max_positions = plan_limits.get(user_plan, 1)

if current_positions >= max_positions:
    raise HTTPException(
        status_code=403,
        detail=f"Pozisyon limitine ulaÅŸtÄ±nÄ±z ({max_positions}). Daha fazla pozisyon iÃ§in planÄ±nÄ±zÄ± yÃ¼kseltin."
    )
```

---

## ğŸ¨ FRONTEND ERÄ°ÅÄ°M KONTROLÃœ

### Component BazlÄ± Kontrol

```typescript
// src/components/FeatureGuard.tsx

import { useSubscription } from '@/hooks/useSubscription';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Button } from '@/components/ui/button';
import { useNavigate } from 'react-router-dom';

interface FeatureGuardProps {
  requiredPlan: 'pro' | 'premium';
  feature: string;
  children: React.ReactNode;
}

export const FeatureGuard = ({ requiredPlan, feature, children }: FeatureGuardProps) => {
  const { tier } = useSubscription();
  const navigate = useNavigate();
  
  const planOrder = { free: 0, pro: 1, premium: 2 };
  const hasAccess = planOrder[tier] >= planOrder[requiredPlan];
  
  if (!hasAccess) {
    return (
      <Alert>
        <AlertDescription>
          ğŸ”’ {feature} Ã¶zelliÄŸi {requiredPlan.toUpperCase()} planÄ±nda mevcut.
          <Button 
            variant="link" 
            onClick={() => navigate('/pricing')}
            className="ml-2"
          >
            PlanÄ±nÄ±zÄ± YÃ¼kseltin
          </Button>
        </AlertDescription>
      </Alert>
    );
  }
  
  return <>{children}</>;
};
```

### KullanÄ±m Ã–rneÄŸi

```typescript
// src/pages/Trading.tsx

<FeatureGuard requiredPlan="pro" feature="GerÃ§ek Trading">
  <TradingForm />
</FeatureGuard>

// Settings.tsx - API Key bÃ¶lÃ¼mÃ¼
<FeatureGuard requiredPlan="pro" feature="API Key YÃ¶netimi">
  <ExchangeConnectDialog />
</FeatureGuard>
```

---

## ğŸ“± UI/UX GÃ–STERGELER

### Plan Badge (Dashboard)
```tsx
{tier === 'free' && (
  <Badge variant="secondary">
    ğŸ†“ DEMO MOD - Pro'ya geÃ§in
  </Badge>
)}

{tier === 'pro' && (
  <Badge variant="default">
    ğŸ’¼ PRO KULLANICI
  </Badge>
)}

{tier === 'premium' && (
  <Badge variant="default" className="bg-gradient-to-r from-yellow-500 to-orange-500">
    ğŸ‘‘ PREMIUM
  </Badge>
)}
```

### Pozisyon Limiti GÃ¶stergesi
```tsx
<div className="text-sm text-muted-foreground">
  AÃ§Ä±k Pozisyonlar: {currentPositions} / {maxPositions}
  {currentPositions >= maxPositions && (
    <Button variant="link" onClick={() => navigate('/pricing')}>
      Limit ArtÄ±r
    </Button>
  )}
</div>
```

---

## âœ… IMPLEMENTATION CHECKLIST

### Backend
- [x] Plan kontrolÃ¼ fonksiyonlarÄ± (`check_plan_limits`, `check_feature_access`)
- [x] Endpoint'lerde plan kontrolÃ¼
- [x] Pozisyon limiti kontrolÃ¼
- [ ] Database'de user plan storage
- [ ] LemonSqueezy webhook'larla plan gÃ¼ncelleme

### Frontend
- [ ] `FeatureGuard` component oluÅŸtur
- [ ] TÃ¼m premium Ã¶zelliklere guard ekle
- [ ] Plan badge'leri ekle
- [ ] Upgrade butonlarÄ± ekle
- [ ] Free kullanÄ±cÄ±lar iÃ§in bilgilendirici mesajlar

### Testing
- [ ] Free kullanÄ±cÄ± testi (limitler Ã§alÄ±ÅŸÄ±yor mu?)
- [ ] Pro kullanÄ±cÄ± testi (10 pozisyon limiti)
- [ ] Premium kullanÄ±cÄ± testi (50 pozisyon limiti)
- [ ] API key ekleme eriÅŸim kontrolÃ¼
- [ ] Trading form eriÅŸim kontrolÃ¼

---

**Son GÃ¼ncelleme**: 2024  
**Durum**: âœ… Documented
